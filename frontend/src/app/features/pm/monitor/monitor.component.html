<div class="monitor-container">
  <div *ngIf="error" class="error-message">
    <mat-icon>error</mat-icon>
    <span>{{ error }}</span>
  </div>

  <div *ngIf="loading" class="loading-spinner">
    Loading grads progress...
  </div>

  <div *ngIf="!loading && !error" class="monitor-content">
    <mat-card class="monitor-card">
      <mat-card-header>
        <mat-card-title>Grads Progress Monitor</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <table mat-table [dataSource]="gradsProgress" class="monitor-table">
          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Grad Name</th>
            <td mat-cell *matCellDef="let grad">{{ grad.name }}</td>
          </ng-container>

          <!-- Domino Game Column -->
          <ng-container matColumnDef="domino">
            <th mat-header-cell *matHeaderCellDef>Domino Game</th>
            <td mat-cell *matCellDef="let grad">
              <div class="game-status">
                <span [style.color]="getStatusColor(grad.progress.domino)">
                  {{ grad.progress.domino }}
                </span>
                <mat-progress-bar
                  mode="determinate"
                  [value]="getProgressValue(grad.score1)"
                  [color]="grad.progress.domino === 'Completed' ? 'primary' : 'accent'"
                ></mat-progress-bar>
              </div>
            </td>
          </ng-container>

          <!-- Decision Tree Game Column -->
          <ng-container matColumnDef="decisionTree">
            <th mat-header-cell *matHeaderCellDef>Decision Tree Game</th>
            <td mat-cell *matCellDef="let grad">
              <div class="game-status">
                <span [style.color]="getStatusColor(grad.progress.decisionTree)">
                  {{ grad.progress.decisionTree }}
                </span>
                <mat-progress-bar
                  mode="determinate"
                  [value]="getProgressValue(grad.score2)"
                  [color]="grad.progress.decisionTree === 'Completed' ? 'primary' : 'accent'"
                ></mat-progress-bar>
              </div>
            </td>
          </ng-container>

          <!-- Total Score Column -->
          <ng-container matColumnDef="totalScore">
            <th mat-header-cell *matHeaderCellDef>Total Score</th>
            <td mat-cell *matCellDef="let grad">{{ grad.totalScore }}</td>
          </ng-container>

          <!-- Status Column -->
          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef>Overall Status</th>
            <td mat-cell *matCellDef="let grad">
              <span [style.color]="getStatusColor(grad.progress.overallProgress)">
                {{ grad.progress.overallProgress }}
              </span>
            </td>
          </ng-container>

          <!-- Actions Column -->
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Actions</th>
            <td mat-cell *matCellDef="let grad">
              <button mat-icon-button color="primary" (click)="viewGradDetail(grad._id)" matTooltip="View Details">
                <mat-icon>visibility</mat-icon>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </mat-card-content>
    </mat-card>
  </div>
</div> 