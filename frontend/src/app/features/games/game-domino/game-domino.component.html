<div class="game-container">
  <div class="score-display">
    Coins: {{ totalScore }}
  </div>
  <p>ðŸŽ² Lets explore Citi's compliance policies</p>

  <div class="domino-chain">
    <!-- First horizontal section (1-5) -->
    <div class="domino-section horizontal">
      <div
        class="domino"
        *ngFor="let d of [].constructor(5); let i = index"
        #domino
        (click)="openPuzzle(i)"
      >
        {{ i + 1 }}
      </div>
    </div>

    <!-- First vertical section (6-10) -->
    <div class="domino-section vertical">
      <div
        class="domino"
        *ngFor="let d of [].constructor(5); let i = index"
        #domino
        (click)="openPuzzle(i + 5)"
      >
        {{ i + 6 }}
      </div>
    </div>

    <!-- Second horizontal section (11-15) -->
    <div class="domino-section horizontal">
      <div
        class="domino"
        *ngFor="let d of [].constructor(5); let i = index"
        #domino
        (click)="openPuzzle(i + 10)"
      >
        {{ i + 11 }}
      </div>
    </div>

    <!-- Second vertical section (16-20) -->
    <div class="domino-section vertical">
      <div
        class="domino"
        *ngFor="let d of [].constructor(5); let i = index"
        #domino
        (click)="openPuzzle(i + 15)"
      >
        {{ i + 16 }}
      </div>
    </div>

    <!-- Third horizontal section (21-25) -->
    <div class="domino-section horizontal">
      <div
        class="domino"
        *ngFor="let d of [].constructor(5); let i = index"
        #domino
        (click)="openPuzzle(i + 20)"
      >
        {{ i + 21 }}
      </div>
    </div>
  </div>

  <div *ngIf="showModal" class="modal-content">
    <h2>{{ puzzles[current].question }}</h2>

    <div class="dropzones">
      <div
        class="dropzone"
        *ngFor="let pair of puzzles[current].pairs"
        #dropzone
        [attr.data-key]="pair.num"
      >
        {{ pair.left }}
        <br />
        <span class="matched-value">{{ userMatches[pair.num] || '?' }}</span>
      </div>
    </div>

    <div class="draggables">
      <div
        class="draggable"
        *ngFor="let pair of puzzles[current].pairs"
        #draggable
      >
        {{ pair.right }}
      </div>
    </div>

    <button (click)="submitPuzzle()">Submit</button>
  </div>

  <div *ngIf="current >= puzzles.length && showWinPopup" class="win-message">
    <h2>You have completed the trail and reached the end! ðŸŽ‰</h2>
    <p class="consequences-intro">If any of the policies are violated then following can be the consequences:</p>
    <div class="bonus-dominoes-popup">
      <div class="domino-popup" #bonusDominoPopup>Diminished reputation</div>
      <div class="domino-popup" #bonusDominoPopup>Limited business opportunities</div>
      <div class="domino-popup" #bonusDominoPopup>Penalties and fines</div>
      <div class="domino-popup" #bonusDominoPopup>Protect Citi's Integrity</div>
    </div>
    <button (click)="closeWinPopup()" class="ok-button">OK</button>
  </div>
</div>
